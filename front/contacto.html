<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
<nav class="navbar navbar-expand-lg bg-success navbar-dark p-3">
  <div class="container-fluid">
    <a class="navbar-brand" href="./index.html">El Club del Mate</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="./index.html">Inicio</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Tienda Online
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="./mate.html">Mates</a></li>
            <li><a class="dropdown-item" href="./bombilla_mate.html">Bombillas</a></li>
            <li><a class="dropdown-item" href="./yerbas.html">Yerbas</a></li>
            <li><a class="dropdown-item" href="./agregados.html">Agregados al Mate</a></li>
            <li><a class="dropdown-item" href="./kits_completos_para_principiantes.html">Kits completos para principiantes</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="./tienda.html">Todos los productos</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./quienes-somos.html">Qui√©nes Somos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="./contacto.html">Contacto</a>
        </li>
      </ul>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search"/>
        <button class="btn btn-outline-success-bg-secondary p-3 text-white" type="button">Buscar</button>
      </form>
    </div>
  </div>
</nav>


<div class="container d-flex justify-content-center align-items-center min-vh-50 contactForm">
  <div class="col-md-6">
    <!-- T√≠tulo y texto centrados -->
    <div class="text-center mb-4">
      <h2>¬°Cont√°ctanos!</h2>
      <p class="text-muted">
        Nos encantar√≠a saber de ti. <br>
        Completa el formulario y te responderemos lo antes posible.<br>
        Tu opini√≥n y consultas son muy importantes para nosotros. üòä
      </p>
    </div>

    <!-- Formulario -->
    <form id="contactForm" class="row g-3 shadow p-4 rounded bg-light">
      
      <!-- Nombre y Apellido en la misma fila -->
      <div class="col-md-6">
        <label for="inputNombre" class="form-label">Nombre</label>
        <input type="text" class="form-control" id="inputNombre" placeholder="Tu nombre" required>
      </div>
      <div class="col-md-6">
        <label for="inputApellido" class="form-label">Apellido</label>
        <input type="text" class="form-control" id="inputApellido" placeholder="Tu apellido" required>
      </div>

      <!-- Email -->
      <div class="col-12">
        <label for="inputEmail" class="form-label">Email</label>
        <input type="email" class="form-control" id="inputEmail" placeholder="ejemplo@correo.com" required>
      </div>

      <!-- Asunto -->
      <div class="col-12">
        <label for="inputAsunto" class="form-label">Asunto</label>
        <input type="text" class="form-control" id="inputAsunto" placeholder="Escribe el asunto" required>
      </div>

      <!-- Mensaje -->
      <div class="col-12">
        <label for="inputMensaje" class="form-label">Mensaje</label>
        <textarea class="form-control" id="inputMensaje" rows="5" placeholder="Escribe tu mensaje aqu√≠..." required></textarea>
      </div>

      <!-- Bot√≥n -->
      <div class="col-12">
        <button type="submit" class="btn btn-success w-100">Enviar</button>
      </div>

      <!-- Mensaje -->
      <div class="col-12">
        <div id="mensaje" class="text-center mt-3"></div>
      </div>

      <!-- Resultado del JSON -->
      <div class="col-12">
        <div id="jsonPreview" class="text-center mt-4"></div>
      </div>


    </form>
  </div>
</div>


  <!-- Footer -->
  <footer class="bg-success text-white text-center py-3 mt-5">
    &copy; 2025 El Club del Mate. Todos los derechos reservados.
  </footer>

<script>
document.getElementById("contactForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const data = {
    nombre: document.getElementById("inputNombre").value,
    apellido: document.getElementById("inputApellido").value,
    email: document.getElementById("inputEmail").value,
    asunto: document.getElementById("inputAsunto").value,
    mensaje: document.getElementById("inputMensaje").value
  };

  // Mostrar el JSON debajo del formulario
    const jsonPreview = document.getElementById("jsonPreview");
    jsonPreview.innerHTML = `
      <h6>üì¶ Ejemplo del JSON enviado:</h6>
      <p>Por ahora va a fallar siempre porque no hay un servidor que procese el formulario.</p>
      <pre class="text-start bg-light p-3 rounded border mx-auto" style="max-width:600px;">
       ${JSON.stringify(data, null, 2)}
      </pre>
    `;


  try {
    const response = await fetch("/api/contacto", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    const resultado = document.getElementById("mensaje");

    if (response.ok) {
      resultado.textContent = "‚úÖ El mensaje se ha enviado correctamente.";
      resultado.className = "text-success fw-bold mt-3";
      document.getElementById("contactForm").reset(); // limpia el form
    } else {
      resultado.textContent = "‚ùå Ha ocurrido un error al enviar.";
      resultado.className = "text-danger fw-bold mt-3";
    }
  } catch (error) {
    console.error(error);
    const resultado = document.getElementById("mensaje");
    resultado.textContent = "‚ö†Ô∏è Error de conexi√≥n con el servidor.";
    resultado.className = "text-warning fw-bold mt-3";
  }
});
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>